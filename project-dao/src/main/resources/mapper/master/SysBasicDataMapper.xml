<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.spring.boot.dao.web.master.SysBasicDataDao">
    <!--<resultMap id="sysCompany" type="com.spring.boot.bean.master.SysBasicData">
        <result column="company_id" property="companyId"/>
        <result column="company_name" property="companyName"/>
        <result column="company_code" property="companyCode"/>
        <result column="parent_id" property="parentId"/>
        <result column="company_phone" property="companyPhone"/>
        <result column="company_address" property="companyAddress"/>
        <result column="status_code" property="statusCode"/>
    </resultMap>-->

    <sql id="Base_Column_List">
		basic_id as basicId, company_id as companyId, year, month,construction_area as constructionArea,charge_area as chargeArea,city_number as cityNumber,project_number as projectNumber
		,house_number as houseNumber,accept_house_number as acceptHouseNumber,for_sale_house_number as forSaleHouseNumber,decorate_house_number as decorateHouseNumber
		,parking_space as parkingSpace,for_sale_parking_space as forSaleParkingSpace,sales_distribution as salesDistribution,status_code as statusCode
	</sql>

    <select id="sysBasicDataAnalysisData" resultType="com.spring.boot.bean.master.SysBasicData" parameterType="map">
        select
        <include refid="Base_Column_List"/>
        from sys_basic_data
        where 1=1
        <if test="companyId != 0">
            and laborCost.company_id=#{companyId}
        </if>
        and year = #{year}
        and month = #{month}
        status_code!=2

    </select>
    <select id="getSysCompanyListTotal" resultType="int"  parameterType="map">
        select count(company_id)
        <include refid="Base_Column_List"/>
        from sys_company
        where status_code!=2
    </select>
    <update id="updateSysBasicData" parameterType="map">
		update sys_basic_data set company_id = #{companyId},year = #{year},month = #{month},construction_area = #{constructionArea},charge_area = #{chargeArea}
		,city_number = #{cityNumber},project_number = #{projectNumber},house_number = #{houseNumber},accept_house_number = #{acceptHouseNumber},accept_house_number = #{acceptHouseNumber}
		,for_sale_house_number = #{forSaleHouseNumber},decorate_house_number = #{decorateHouseNumber},parking_space = #{parkingSpace},for_sale_parking_space = #{forSaleParkingSpace}
		,sales_distribution = #{salesDistribution}
		where basic_id = #{basicId}
	</update>
    <insert id="addSysBasicData" parameterType="map">
		INSERT INTO sys_basic_data (company_id, year, month, construction_area,charge_area,city_number,project_number,house_number,accept_house_number,for_sale_house_number,decorate_house_number
		,parking_space,for_sale_parking_space,sales_distribution)
              VALUES   (#{companyId},#{year},#{month},#{constructionArea},#{chargeArea},#{cityNumber},#{projectNumber},#{houseNumber},#{acceptHouseNumber},#{forSaleHouseNumber},#{decorateHouseNumber}
              ,#{parkingSpace} ,#{forSaleParkingSpace},#{salesDistribution} )
	</insert>
    <update id="deleteSysBasicData" parameterType="map">
		update sys_basic_data set status_code = 2
		where basic_id = #{basicId}
	</update>

</mapper>
